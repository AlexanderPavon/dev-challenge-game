{% extends "base.html" %}

{% block title %}Registrarse{% endblock title %}

{% block content %}
<body class="min-h-screen bg-gradient-to-br from-[#D3F1DF] to-[#85A98F] flex items-center justify-center p-4">
    <div class="bg-white shadow-2xl rounded-2xl w-full max-w-md p-8">
        <h2 class="text-3xl font-bold text-center text-[#47663B] mb-6">
            Registrarse
        </h2>
        <form method="post" class="space-y-6">
            {% csrf_token %}
        
            <!-- Campo de Nombre de Usuario -->
            <div class="relative">
                <i class="bi bi-person-fill absolute left-3 top-1/2 transform -translate-y-1/2 text-black-400"></i>
                <input 
                    type="text" 
                    placeholder="Nombre de usuario" 
                    name="username"
                    id="username"
                    class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    value="{{ form.username.value|default:'' }}"
                    required
                >
                
            </div>
            
        
            <!-- Contraseña -->
            <div class="relative">
                <i class="bi bi-lock-fill absolute left-3 top-1/2 transform -translate-y-1/2 text-black-400"></i>
                <input 
                    type="password" 
                    placeholder="Contraseña" 
                    name="password"
                    id="password"
                    class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                >
                <button 
                    type="button" 
                    onclick="togglePasswordVisibility(this, 'password')"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #47663B; cursor: pointer;">
                    <i class="bi bi-eye-slash-fill"></i>
                </button>
            </div>
        
            <!-- Confirmar Contraseña -->
            <div class="relative">
                <i class="bi bi-lock-fill absolute left-3 top-1/2 transform -translate-y-1/2 text-black-400"></i>
                <input 
                    type="password" 
                    placeholder="Confirmar Contraseña" 
                    name="password_confirm"
                    id="password_confirm"
                    class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    required
                >
                <button 
                    type="button" 
                    onclick="togglePasswordVisibility(this, 'password_confirm')"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #47663B; cursor: pointer;">
                    <i class="bi bi-eye-slash-fill"></i>
                </button>
            </div>
        
            <!-- Botón de Registro -->
            <button 
                type="submit" 
                class="w-full bg-gradient-to-r from-[#85A98F] to-[#D3F1DF] text-white py-3 rounded-lg hover:opacity-90 transition-opacity"
            >
                Registrarse
            </button>
        
            <div class="text-center">
                <a href="{% url 'cleanitup:login' %}" class="text-sm text-[#5A6C57] hover:underline">
                    ¿Ya tienes una cuenta? Iniciar Sesión
                </a>
            </div>
        </form>
    </div>
</body>

{% endblock content %}

{% block extra_js %}
<script src="https://cdn.tailwindcss.com"></script>

<script>
    function togglePasswordVisibility(button, inputId) {
        const passwordInput = document.getElementById(inputId); // Usar el inputId recibido
        const icon = button.querySelector('i'); // Obtener el icono dentro del botón

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text'; // Cambiar a texto para mostrar la contraseña
            icon.classList.remove('bi-eye-slash-fill');  // Quitar el icono de "ocultar"
            icon.classList.add('bi-eye-fill');  // Agregar el icono de "mostrar"
        } else {
            passwordInput.type = 'password'; // Cambiar a tipo "password" para ocultar la contraseña
            icon.classList.remove('bi-eye-fill');  // Quitar el icono de "mostrar"
            icon.classList.add('bi-eye-slash-fill'); // Agregar el icono de "ocultar"
        }
    }
</script>

{% endblock extra_js %}